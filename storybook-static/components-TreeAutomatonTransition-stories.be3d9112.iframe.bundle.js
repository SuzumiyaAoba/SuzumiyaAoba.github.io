"use strict";(self.webpackChunksuzumiyaaoba_github_io=self.webpackChunksuzumiyaaoba_github_io||[]).push([[455],{"./src/components/TreeAutomatonTransition.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,FastAutoPlay:()=>FastAutoPlay,LargeSize:()=>LargeSize,Minimal:()=>Minimal,SimpleTest:()=>SimpleTest,SlowAutoPlay:()=>SlowAutoPlay,SmallSize:()=>SmallSize,WithAutoPlay:()=>WithAutoPlay,WithoutDescription:()=>WithoutDescription,WithoutStepIndicator:()=>WithoutStepIndicator,__namedExportsOrder:()=>__namedExportsOrder,default:()=>TreeAutomatonTransition_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),VisDotGraph=__webpack_require__("./src/components/VisDotGraph/index.tsx");const TreeAutomatonTransition=({steps=[],width="800px",height="400px",fontSize=16,className="",showStepIndicator=!0,showDescription=!0,autoPlay=!1,autoPlayInterval=2e3})=>{const[currentStep,setCurrentStep]=(0,react.useState)(0),[isClient,setIsClient]=(0,react.useState)(!1),[isPlaying,setIsPlaying]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(null);(0,react.useEffect)((()=>{setIsClient(!0)}),[]),(0,react.useEffect)((()=>{try{if(!steps||!Array.isArray(steps)||0===steps.length)throw new Error("ステップデータが無効です");const currentStepData=steps[currentStep];if(!currentStepData||!currentStepData.nodes||!Array.isArray(currentStepData.nodes))throw new Error(`ステップ${currentStep+1}のデータが無効です`);setError(null)}catch(err){const errorMessage=err instanceof Error?err.message:String(err);setError(errorMessage)}}),[steps,currentStep]),(0,react.useEffect)((()=>{if(!autoPlay||!isPlaying||!isClient)return;const interval=setInterval((()=>{setCurrentStep((prev=>prev>=steps.length-1?(setIsPlaying(!1),prev):prev+1))}),autoPlayInterval);return()=>clearInterval(interval)}),[autoPlay,isPlaying,steps.length,autoPlayInterval,isClient]);const handleNext=(0,react.useCallback)((()=>{setCurrentStep((prev=>Math.min(prev+1,steps.length-1)))}),[steps.length]),handlePrevious=(0,react.useCallback)((()=>{setCurrentStep((prev=>Math.max(prev-1,0)))}),[]),handleReset=(0,react.useCallback)((()=>{setCurrentStep(0),setIsPlaying(!1)}),[]),handlePlayPause=(0,react.useCallback)((()=>{currentStep>=steps.length-1&&setCurrentStep(0),setIsPlaying((prev=>!prev))}),[currentStep,steps.length]),currentStepData=(0,react.useMemo)((()=>steps[currentStep]||{nodes:[],edges:[],description:"",stepNumber:0}),[steps,currentStep]),visDotGraphData=(0,react.useMemo)((()=>({nodes:currentStepData.nodes.map((node=>({id:node.id,label:node.label,state:node.state,color:node.color}))),edges:currentStepData.edges.map((edge=>({source:edge.from||edge.source,target:edge.to||edge.target,from:edge.from||edge.source,to:edge.to||edge.target,label:edge.label,color:edge.color})))})),[currentStepData]),progress=(0,react.useMemo)((()=>steps.length>0?(currentStep+1)/steps.length*100:0),[currentStep,steps.length]);return isClient?error?(0,jsx_runtime.jsx)("div",{className:`tree-automaton-transition border border-red-200 rounded-lg p-4 my-4 bg-red-50 ${className}`,role:"alert","aria-live":"polite",children:(0,jsx_runtime.jsxs)("div",{className:"text-red-800",children:[(0,jsx_runtime.jsx)("h4",{className:"font-semibold mb-2",children:"エラーが発生しました:"}),(0,jsx_runtime.jsx)("p",{children:error})]})}):(0,jsx_runtime.jsxs)("div",{className:`tree-automaton-transition border border-gray-200 rounded-lg p-4 my-4 ${className}`,role:"region","aria-label":"木オートマトン遷移コンポーネント",children:[(0,jsx_runtime.jsxs)("div",{className:"transition-controls mb-4 flex items-center justify-center gap-2 flex-wrap",children:[(0,jsx_runtime.jsx)("button",{onClick:handlePrevious,disabled:0===currentStep,className:"px-3 py-2 bg-blue-500 text-white rounded disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors","aria-label":"前のステップに移動",children:"← 前へ"}),(0,jsx_runtime.jsx)("button",{onClick:handleReset,className:"px-3 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors","aria-label":"最初のステップにリセット",children:"リセット"}),autoPlay&&(0,jsx_runtime.jsx)("button",{onClick:handlePlayPause,className:"px-3 py-2 rounded focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors "+(isPlaying?"bg-red-500 text-white hover:bg-red-600 focus:ring-red-500":"bg-green-500 text-white hover:bg-green-600 focus:ring-green-500"),"aria-label":isPlaying?"再生を停止":"自動再生を開始",children:isPlaying?"⏸ 停止":"▶ 再生"}),(0,jsx_runtime.jsx)("button",{onClick:handleNext,disabled:currentStep===steps.length-1,className:"px-3 py-2 bg-blue-500 text-white rounded disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors","aria-label":"次のステップに移動",children:"次へ →"})]}),showStepIndicator&&(0,jsx_runtime.jsxs)("div",{className:"step-indicator mb-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[(0,jsx_runtime.jsxs)("span",{children:["ステップ ",currentStep+1," / ",steps.length]}),(0,jsx_runtime.jsxs)("span",{children:[Math.round(progress),"%"]})]}),(0,jsx_runtime.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,jsx_runtime.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300 ease-out",style:{width:`${progress}%`},role:"progressbar","aria-valuenow":currentStep+1,"aria-valuemin":1,"aria-valuemax":steps.length})})]}),showDescription&&currentStepData.description&&(0,jsx_runtime.jsxs)("div",{className:"step-description mb-4 p-4 bg-gray-100 rounded",children:[(0,jsx_runtime.jsxs)("h4",{className:"font-semibold mb-2",children:["ステップ ",currentStep+1," の説明:"]}),(0,jsx_runtime.jsx)("p",{className:"text-gray-700",children:currentStepData.description})]}),(0,jsx_runtime.jsx)("div",{className:"graph-container",children:(0,jsx_runtime.jsx)(VisDotGraph.k,{data:visDotGraphData,width,height,fontSize})})]}):(0,jsx_runtime.jsx)("div",{className:`tree-automaton-transition border border-gray-200 rounded-lg p-4 my-4 ${className}`,role:"region","aria-label":"木オートマトン遷移コンポーネント",children:(0,jsx_runtime.jsx)("div",{className:"text-center p-8",children:(0,jsx_runtime.jsxs)("div",{className:"animate-pulse",children:[(0,jsx_runtime.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,jsx_runtime.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,jsx_runtime.jsx)("div",{className:"h-4 bg-gray-200 rounded"})]})})})},components_TreeAutomatonTransition=TreeAutomatonTransition;TreeAutomatonTransition.__docgenInfo={description:"",methods:[],displayName:"TreeAutomatonTransition",props:{steps:{required:!1,tsType:{name:"Array",elements:[{name:"TransitionStep"}],raw:"TransitionStep[]"},description:"",defaultValue:{value:"[]",computed:!1}},width:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"800px"',computed:!1}},height:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"400px"',computed:!1}},fontSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"16",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},showStepIndicator:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showDescription:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},autoPlay:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},autoPlayInterval:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2000",computed:!1}}}};const TreeAutomatonTransition_stories={title:"Components/TreeAutomatonTransition",component:components_TreeAutomatonTransition,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{autoPlay:{control:"boolean",description:"自動再生機能を有効にする"},autoPlayInterval:{control:{type:"number",min:500,max:5e3,step:100},description:"自動再生の間隔（ミリ秒）"},showStepIndicator:{control:"boolean",description:"ステップインジケーターを表示する"},showDescription:{control:"boolean",description:"ステップ説明を表示する"}}},sampleSteps=[{stepNumber:1,description:"初期状態：すべてのノードに初期状態 q_init が割り当てられています",nodes:[{id:"if_root",label:"$\\mathrm{if}$",state:"$q_\\mathit{init}$"},{id:"and_cond",label:"$\\mathrm{and}$",state:"$q_\\mathit{init}$"},{id:"true_cond",label:"$\\mathrm{true}$",state:"$q_\\mathit{init}$"},{id:"or_cond",label:"$\\mathrm{or}$",state:"$q_\\mathit{init}$"},{id:"false_or",label:"$\\mathrm{false}$",state:"$q_\\mathit{init}$"},{id:"true_or",label:"$\\mathrm{true}$",state:"$q_\\mathit{init}$"},{id:"plus_true",label:"$\\mathrm{+}$",state:"$q_\\mathit{init}$"},{id:"num1",label:"$\\mathrm{1}$",state:"$q_\\mathit{init}$"},{id:"num2",label:"$\\mathrm{2}$",state:"$q_\\mathit{init}$"}],edges:[{from:"if_root",to:"and_cond",label:"条件",color:"red"},{from:"if_root",to:"plus_true",label:"真の分岐",color:"green"},{from:"and_cond",to:"true_cond",label:"左",color:"black"},{from:"and_cond",to:"or_cond",label:"右",color:"black"},{from:"or_cond",to:"false_or",label:"左",color:"black"},{from:"or_cond",to:"true_or",label:"右",color:"black"},{from:"plus_true",to:"num1",label:"左",color:"black"},{from:"plus_true",to:"num2",label:"右",color:"black"}]},{stepNumber:2,description:"リーフノードの状態を確定：true, false, 1, 2 のノードに適切な状態を割り当て",nodes:[{id:"if_root",label:"$\\mathrm{if}$",state:"$q_\\mathit{init}$"},{id:"and_cond",label:"$\\mathrm{and}$",state:"$q_\\mathit{init}$"},{id:"true_cond",label:"$\\mathrm{true}$",state:"$q_\\mathit{bool}$"},{id:"or_cond",label:"$\\mathrm{or}$",state:"$q_\\mathit{init}$"},{id:"false_or",label:"$\\mathrm{false}$",state:"$q_\\mathit{bool}$"},{id:"true_or",label:"$\\mathrm{true}$",state:"$q_\\mathit{bool}$"},{id:"plus_true",label:"$\\mathrm{+}$",state:"$q_\\mathit{init}$"},{id:"num1",label:"$\\mathrm{1}$",state:"$q_\\mathit{int}$"},{id:"num2",label:"$\\mathrm{2}$",state:"$q_\\mathit{int}$"}],edges:[{from:"if_root",to:"and_cond",label:"条件",color:"red"},{from:"if_root",to:"plus_true",label:"真の分岐",color:"green"},{from:"and_cond",to:"true_cond",label:"左",color:"black"},{from:"and_cond",to:"or_cond",label:"右",color:"black"},{from:"or_cond",to:"false_or",label:"左",color:"black"},{from:"or_cond",to:"true_or",label:"右",color:"black"},{from:"plus_true",to:"num1",label:"左",color:"black"},{from:"plus_true",to:"num2",label:"右",color:"black"}]},{stepNumber:3,description:"OR演算の評価：false OR true の結果が q_bool として計算される",nodes:[{id:"if_root",label:"$\\mathrm{if}$",state:"$q_\\mathit{init}$"},{id:"and_cond",label:"$\\mathrm{and}$",state:"$q_\\mathit{init}$"},{id:"true_cond",label:"$\\mathrm{true}$",state:"$q_\\mathit{bool}$"},{id:"or_cond",label:"$\\mathrm{or}$",state:"$q_\\mathit{bool}$"},{id:"false_or",label:"$\\mathrm{false}$",state:"$q_\\mathit{bool}$"},{id:"true_or",label:"$\\mathrm{true}$",state:"$q_\\mathit{bool}$"},{id:"plus_true",label:"$\\mathrm{+}$",state:"$q_\\mathit{init}$"},{id:"num1",label:"$\\mathrm{1}$",state:"$q_\\mathit{int}$"},{id:"num2",label:"$\\mathrm{2}$",state:"$q_\\mathit{int}$"}],edges:[{from:"if_root",to:"and_cond",label:"条件",color:"red"},{from:"if_root",to:"plus_true",label:"真の分岐",color:"green"},{from:"and_cond",to:"true_cond",label:"左",color:"black"},{from:"and_cond",to:"or_cond",label:"右",color:"black"},{from:"or_cond",to:"false_or",label:"左",color:"black"},{from:"or_cond",to:"true_or",label:"右",color:"black"},{from:"plus_true",to:"num1",label:"左",color:"black"},{from:"plus_true",to:"num2",label:"右",color:"black"}]},{stepNumber:4,description:"AND演算の評価：true AND (false OR true) の結果が q_bool として計算される",nodes:[{id:"if_root",label:"$\\mathrm{if}$",state:"$q_\\mathit{init}$"},{id:"and_cond",label:"$\\mathrm{and}$",state:"$q_\\mathit{bool}$"},{id:"true_cond",label:"$\\mathrm{true}$",state:"$q_\\mathit{bool}$"},{id:"or_cond",label:"$\\mathrm{or}$",state:"$q_\\mathit{bool}$"},{id:"false_or",label:"$\\mathrm{false}$",state:"$q_\\mathit{bool}$"},{id:"true_or",label:"$\\mathrm{true}$",state:"$q_\\mathit{bool}$"},{id:"plus_true",label:"$\\mathrm{+}$",state:"$q_\\mathit{init}$"},{id:"num1",label:"$\\mathrm{1}$",state:"$q_\\mathit{int}$"},{id:"num2",label:"$\\mathrm{2}$",state:"$q_\\mathit{int}$"}],edges:[{from:"if_root",to:"and_cond",label:"条件",color:"red"},{from:"if_root",to:"plus_true",label:"真の分岐",color:"green"},{from:"and_cond",to:"true_cond",label:"左",color:"black"},{from:"and_cond",to:"or_cond",label:"右",color:"black"},{from:"or_cond",to:"false_or",label:"左",color:"black"},{from:"or_cond",to:"true_or",label:"右",color:"black"},{from:"plus_true",to:"num1",label:"左",color:"black"},{from:"plus_true",to:"num2",label:"右",color:"black"}]},{stepNumber:5,description:"加算演算の評価：1 + 2 の結果が q_int として計算される",nodes:[{id:"if_root",label:"$\\mathrm{if}$",state:"$q_\\mathit{init}$"},{id:"and_cond",label:"$\\mathrm{and}$",state:"$q_\\mathit{bool}$"},{id:"true_cond",label:"$\\mathrm{true}$",state:"$q_\\mathit{bool}$"},{id:"or_cond",label:"$\\mathrm{or}$",state:"$q_\\mathit{bool}$"},{id:"false_or",label:"$\\mathrm{false}$",state:"$q_\\mathit{bool}$"},{id:"true_or",label:"$\\mathrm{true}$",state:"$q_\\mathit{bool}$"},{id:"plus_true",label:"$\\mathrm{+}$",state:"$q_\\mathit{int}$"},{id:"num1",label:"$\\mathrm{1}$",state:"$q_\\mathit{int}$"},{id:"num2",label:"$\\mathrm{2}$",state:"$q_\\mathit{int}$"}],edges:[{from:"if_root",to:"and_cond",label:"条件",color:"red"},{from:"if_root",to:"plus_true",label:"真の分岐",color:"green"},{from:"and_cond",to:"true_cond",label:"左",color:"black"},{from:"and_cond",to:"or_cond",label:"右",color:"black"},{from:"or_cond",to:"false_or",label:"左",color:"black"},{from:"or_cond",to:"true_or",label:"右",color:"black"},{from:"plus_true",to:"num1",label:"左",color:"black"},{from:"plus_true",to:"num2",label:"右",color:"black"}]},{stepNumber:6,description:"最終状態：if文の条件が q_bool で真のため、真の分岐 q_int が選択される",nodes:[{id:"if_root",label:"$\\mathrm{if}$",state:"$q_\\mathit{int}$"},{id:"and_cond",label:"$\\mathrm{and}$",state:"$q_\\mathit{bool}$"},{id:"true_cond",label:"$\\mathrm{true}$",state:"$q_\\mathit{bool}$"},{id:"or_cond",label:"$\\mathrm{or}$",state:"$q_\\mathit{bool}$"},{id:"false_or",label:"$\\mathrm{false}$",state:"$q_\\mathit{bool}$"},{id:"true_or",label:"$\\mathrm{true}$",state:"$q_\\mathit{bool}$"},{id:"plus_true",label:"$\\mathrm{+}$",state:"$q_\\mathit{int}$"},{id:"num1",label:"$\\mathrm{1}$",state:"$q_\\mathit{int}$"},{id:"num2",label:"$\\mathrm{2}$",state:"$q_\\mathit{int}$"}],edges:[{from:"if_root",to:"and_cond",label:"条件",color:"red"},{from:"if_root",to:"plus_true",label:"真の分岐",color:"green"},{from:"and_cond",to:"true_cond",label:"左",color:"black"},{from:"and_cond",to:"or_cond",label:"右",color:"black"},{from:"or_cond",to:"false_or",label:"左",color:"black"},{from:"or_cond",to:"true_or",label:"右",color:"black"},{from:"plus_true",to:"num1",label:"左",color:"black"},{from:"plus_true",to:"num2",label:"右",color:"black"}]}],Default={args:{steps:sampleSteps,width:"800px",height:"400px",fontSize:16}},SmallSize={args:{steps:sampleSteps,width:"600px",height:"300px",fontSize:14}},LargeSize={args:{steps:sampleSteps,width:"1000px",height:"500px",fontSize:18}},WithAutoPlay={args:{steps:sampleSteps,width:"800px",height:"400px",fontSize:16,autoPlay:!0,autoPlayInterval:1500}},WithoutStepIndicator={args:{steps:sampleSteps,width:"800px",height:"400px",fontSize:16,showStepIndicator:!1}},WithoutDescription={args:{steps:sampleSteps,width:"800px",height:"400px",fontSize:16,showDescription:!1}},Minimal={args:{steps:sampleSteps,width:"800px",height:"400px",fontSize:16,showStepIndicator:!1,showDescription:!1}},FastAutoPlay={args:{steps:sampleSteps,width:"800px",height:"400px",fontSize:16,autoPlay:!0,autoPlayInterval:800}},SlowAutoPlay={args:{steps:sampleSteps,width:"800px",height:"400px",fontSize:16,autoPlay:!0,autoPlayInterval:3e3}},SimpleTest={args:{steps:[{stepNumber:1,description:"テスト：単純な木構造",nodes:[{id:"root",label:"root",state:"q_init"},{id:"child1",label:"child1",state:"q_bool"},{id:"child2",label:"child2",state:"q_int"}],edges:[{from:"root",to:"child1",label:"left"},{from:"root",to:"child2",label:"right"}]}],width:"400px",height:"300px",fontSize:14}},__namedExportsOrder=["Default","SmallSize","LargeSize","WithAutoPlay","WithoutStepIndicator","WithoutDescription","Minimal","FastAutoPlay","SlowAutoPlay","SimpleTest"]}}]);