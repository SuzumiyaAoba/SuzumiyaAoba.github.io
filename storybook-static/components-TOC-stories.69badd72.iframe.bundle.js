/*! For license information please see components-TOC-stories.69badd72.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunksuzumiyaaoba_github_io=self.webpackChunksuzumiyaaoba_github_io||[]).push([[5134],{"./src/components/TOC.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>TOC_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const X=(0,__webpack_require__("./node_modules/lucide-react/dist/esm/createLucideIcon.js").A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function renderToc(entries,activeId,depth=0){return(0,jsx_runtime.jsx)("ul",{className:`toc-list depth-${depth}`,children:entries.map((entry=>{const isActive=entry.heading.id===activeId,hasActiveChild=entry.children.some((child=>child.heading.id===activeId||child.children.some((grandChild=>grandChild.heading.id===activeId))));return(0,jsx_runtime.jsxs)("li",{className:`toc-list-item depth-${depth} ${isActive?"toc-active":""} ${hasActiveChild?"toc-has-active-child":""}`,children:[(0,jsx_runtime.jsx)("a",{href:`#${entry.heading.id}`,className:"toc-link "+(isActive?"toc-link-active":""),onClick:e=>{var _document_getElementById;e.preventDefault(),null===(_document_getElementById=document.getElementById(entry.heading.id))||void 0===_document_getElementById||_document_getElementById.scrollIntoView({behavior:"smooth",block:"start"}),window.history.replaceState(null,"",`#${entry.heading.id}`)},children:entry.heading.text}),entry.children.length>0&&renderToc(entry.children,activeId,depth+1)]},entry.heading.id)}))})}const TOC=({toc,toggleVisibility})=>{const activeId=function useActiveHeading(entries){const[activeId,setActiveId]=(0,react.useState)(null);return(0,react.useEffect)((()=>{if(!entries||0===entries.length)return;const allHeadingIds=entries.flatMap((entry=>{const ids=[entry.heading.id];return entry.children&&entry.children.length>0&&entry.children.forEach((child=>{ids.push(child.heading.id),child.children&&child.children.length>0&&child.children.forEach((grandChild=>{ids.push(grandChild.heading.id)}))})),ids})),observer=new IntersectionObserver((entries=>{const visibleEntries=entries.filter((entry=>entry.isIntersecting));if(visibleEntries.length>0){const headingId=visibleEntries.sort(((a,b)=>a.boundingClientRect.top-b.boundingClientRect.top))[0].target.id;setActiveId(headingId)}}),{rootMargin:"-80px 0px -20% 0px",threshold:.1});return allHeadingIds.forEach((id=>{const element=document.getElementById(id);element&&observer.observe(element)})),()=>{allHeadingIds.forEach((id=>{const element=document.getElementById(id);element&&observer.unobserve(element)}))}}),[entries]),activeId}(toc),navRef=(0,react.useRef)(null);return function useTocSticky(){(0,react.useEffect)((()=>{const setHeaderHeight=()=>{const header=document.querySelector("header");if(header){const headerHeight=header.offsetHeight;document.documentElement.style.setProperty("--header-height",`${headerHeight}px`)}};return setHeaderHeight(),window.addEventListener("resize",setHeaderHeight,{passive:!0}),document.documentElement.style.scrollPaddingTop="calc(var(--header-height, 80px) + 16px)",document.documentElement.style.scrollBehavior="smooth",()=>{window.removeEventListener("resize",setHeaderHeight)}}),[])}(),toc&&0!==toc.length?(0,jsx_runtime.jsxs)("nav",{ref:navRef,className:"toc-container","aria-label":"コンテンツ",children:[(0,jsx_runtime.jsxs)("div",{className:"toc-summary",children:["目次",(0,jsx_runtime.jsx)("button",{onClick:()=>null==toggleVisibility?void 0:toggleVisibility(),className:"toc-toggle-button","aria-label":"目次を隠す",children:(0,jsx_runtime.jsx)(X,{size:20})})]}),renderToc(toc,activeId,0)]}):null};TOC.__docgenInfo={description:"",methods:[],displayName:"TOC",props:{toc:{required:!0,tsType:{name:"Array",elements:[{name:"TocEntry"}],raw:"TocEntry[]"},description:""},toggleVisibility:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const TOC_stories={title:"Components/TOC",component:TOC},Default={args:{}},__namedExportsOrder=["Default"]},"./node_modules/lucide-react/dist/esm/createLucideIcon.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>createLucideIcon});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const toPascalCase=string=>{const camelCase=(string=>string.replace(/^([A-Z])|[\s-_]+(\w)/g,((match,p1,p2)=>p2?p2.toUpperCase():p1.toLowerCase())))(string);return camelCase.charAt(0).toUpperCase()+camelCase.slice(1)},mergeClasses=(...classes)=>classes.filter(((className,index,array)=>Boolean(className)&&""!==className.trim()&&array.indexOf(className)===index)).join(" ").trim(),hasA11yProp=props=>{for(const prop in props)if(prop.startsWith("aria-")||"role"===prop||"title"===prop)return!0};var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Icon=(0,react.forwardRef)((({color="currentColor",size=24,strokeWidth=2,absoluteStrokeWidth,className="",children,iconNode,...rest},ref)=>(0,react.createElement)("svg",{ref,...defaultAttributes,width:size,height:size,stroke:color,strokeWidth:absoluteStrokeWidth?24*Number(strokeWidth)/Number(size):strokeWidth,className:mergeClasses("lucide",className),...!children&&!hasA11yProp(rest)&&{"aria-hidden":"true"},...rest},[...iconNode.map((([tag,attrs])=>(0,react.createElement)(tag,attrs))),...Array.isArray(children)?children:[children]]))),createLucideIcon=(iconName,iconNode)=>{const Component=(0,react.forwardRef)((({className,...props},ref)=>{return(0,react.createElement)(Icon,{ref,iconNode,className:mergeClasses(`lucide-${string=toPascalCase(iconName),string.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${iconName}`,className),...props});var string}));return Component.displayName=toPascalCase(iconName),Component}}}]);